"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8465],{8465:(T,u,l)=>{l.r(u),l.d(u,{ProfilePageModule:()=>N});var m=l(6895),g=l(433),t=l(4556),f=l(131),c=l(655),a=l(7396),h=l(7280),e=l(8256),p=l(3692);function P(i,d){if(1&i){const o=e.EpF();e.TgZ(0,"div",6),e._uU(1),e.TgZ(2,"ion-button",7),e.NdJ("click",function(){e.CHM(o);const s=e.oxw();return e.KtG(s.dismissErrorMessage())}),e._UZ(3,"ion-icon",8),e.qZA()()}if(2&i){const o=e.oxw();e.xp6(1),e.hij(" ",o.errorMessage," ")}}const b=[{path:"",component:(()=>{class i{constructor(o,n){this.firebaseApp=o,this.loadingController=n,this.user=null,this.email="",this.firstName="",this.lastName="",this.mobileNumber="",this.address="",this.errorMessage="",this.loading=null}ngOnInit(){this.loadProfileData()}loadProfileData(){return(0,c.mG)(this,void 0,void 0,function*(){const o=(0,h.v0)(this.firebaseApp);if(this.user=o.currentUser,this.user){this.email=this.user.email||"";const n=(0,a.JU)((0,a.hJ)((0,a.ad)(this.firebaseApp),"Profiles"),this.user.uid),s=yield(0,a.QT)(n);if(s.exists()){const r=s.data();this.firstName=r.firstName,this.lastName=r.lastName,this.mobileNumber=r.mobileNumber,this.address=r.address}}})}updateProfile(){var o;return(0,c.mG)(this,void 0,void 0,function*(){if(""!==this.firstName.trim())if(""!==this.lastName.trim())if(!this.mobileNumber||/^(0|\+?63)?\d{10}$/.test(this.mobileNumber)){this.errorMessage="",this.loading=yield this.loadingController.create({message:"Updating profile..."}),yield this.loading.present();try{const s=(0,a.ad)(this.firebaseApp),r=(0,a.JU)(s,"Profiles",this.user.uid),Z={email:null===(o=this.user)||void 0===o?void 0:o.email,firstName:this.firstName,lastName:this.lastName,mobileNumber:this.mobileNumber,address:this.address};yield(0,a.pl)(r,Z,{merge:!0}),yield this.loading.dismiss(),this.loading=null}catch(s){console.error("Error updating profile:",s),this.loading&&(yield this.loading.dismiss(),this.loading=null)}}else this.errorMessage="Invalid mobile number.";else this.errorMessage="Last name cannot be blank.";else this.errorMessage="First name cannot be blank."})}dismissErrorMessage(){this.errorMessage=""}}return i.\u0275fac=function(o){return new(o||i)(e.Y36(p.Ot),e.Y36(t.HT))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-profile"]],decls:34,vars:6,consts:[["slot","start"],["defaultHref","/"],["readonly","",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["expand","full",3,"click"],["class","error-message",4,"ngIf"],[1,"error-message"],["fill","clear","slot","end",3,"click"],["name","close"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-back-button",1),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Profile"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-card")(8,"ion-card-content")(9,"ion-item")(10,"ion-label"),e._uU(11,"Email:"),e.qZA(),e.TgZ(12,"ion-input",2),e.NdJ("ngModelChange",function(r){return n.email=r}),e.qZA()(),e.TgZ(13,"ion-item")(14,"ion-label"),e._uU(15,"First Name:"),e.qZA(),e.TgZ(16,"ion-input",3),e.NdJ("ngModelChange",function(r){return n.firstName=r}),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-label"),e._uU(19,"Last Name:"),e.qZA(),e.TgZ(20,"ion-input",3),e.NdJ("ngModelChange",function(r){return n.lastName=r}),e.qZA()(),e.TgZ(21,"ion-item")(22,"ion-label"),e._uU(23,"Mobile Number:"),e.qZA(),e.TgZ(24,"ion-input",3),e.NdJ("ngModelChange",function(r){return n.mobileNumber=r}),e.qZA()(),e.TgZ(25,"ion-item")(26,"ion-label"),e._uU(27,"Address:"),e.qZA(),e.TgZ(28,"ion-input",3),e.NdJ("ngModelChange",function(r){return n.address=r}),e.qZA()()()(),e.TgZ(29,"ion-button",4),e.NdJ("click",function(){return n.updateProfile()}),e._uU(30,"Update"),e.qZA(),e.TgZ(31,"ion-footer")(32,"ion-toolbar"),e.YNc(33,P,4,1,"div",5),e.qZA()()()),2&o&&(e.xp6(12),e.Q6J("ngModel",n.email),e.xp6(4),e.Q6J("ngModel",n.firstName),e.xp6(4),e.Q6J("ngModel",n.lastName),e.xp6(4),e.Q6J("ngModel",n.mobileNumber),e.xp6(4),e.Q6J("ngModel",n.address),e.xp6(5),e.Q6J("ngIf",n.errorMessage))},dependencies:[m.O5,g.JJ,g.On,t.oU,t.YG,t.Sm,t.PM,t.FN,t.W2,t.fr,t.Gu,t.gu,t.pK,t.Ie,t.Q$,t.wd,t.sr,t.j9,t.cs],styles:[".error-message[_ngcontent-%COMP%]{background-color:red;color:#fff;padding:10px;text-align:center}"]}),i})()}];let M=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[f.Bz.forChild(b),f.Bz]}),i})(),N=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,g.u5,t.Pc,M]}),i})()}}]);